
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <style>
                body {
                  background-color: white; /* Ensure the iframe has a white background */
                }

                
              </style>
                        </head>
                        <body>
                            <!-- index.html ‚Äî –ø–æ—Å–ª–µ <circle id="buran4"> -->
<g id="buran-4-anim" transform="translate(680,210)">
  <!-- –ö–æ—Ä–ø—É—Å -->
  <path d="M0,-20 L15,0 L0,20 L-15,0 Z" fill="#333" stroke="#aaa" stroke-width="1"/>
  <!-- –ö—Ä—ã–ª—å—è (–∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) -->
  <path id="wing-left" d="M-15,0 L-60,-10 L-60,10 Z" fill="#555" stroke="#777"/>
  <path id="wing-right" d="M15,0 L60,-10 L60,10 Z" fill="#555" stroke="#777"/>
  <!-- –î–≤–∏–≥–∞—Ç–µ–ª—å -->
  <rect id="engine" x="-5" y="20" width="10" height="15" fill="#222"/>
  <!-- –ü–ª–∞–º—è (–∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ JS) -->
  <g id="flame">
    <polygon points="0,35 -8,50 0,60 8,50" fill="#ff4400"/>
    <animate id="flame-anim" attributeName="points" 
             values="0,35 -8,50 0,60 8,50;
                     0,35 -6,55 0,65 6,55;
                     0,35 -8,50 0,60 8,50"
             dur="0.3s" repeatCount="indefinite"/>
  </g>
  <!-- –ò—Å–∫—Ä—ã -->
  <g id="sparks"></g>
</g>

<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ZIP ‚Äî –ë—É—Ä–∞–Ω-4 (FULL)</title></head>
<body style="font-family:monospace;padding:20px;background:#000;color:#0f0">
  <h2>üöÄ –ë–£–†–ê–ù-4: –°–ü–£–¢–ù–ò–ö–û–í–´–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì 1991</h2>
  <button id="dl" style="padding:10px 20px;font-size:16px;background:#f00;color:#fff;border:none">–°–ö–ê–ß–ê–¢–¨ –ü–û–õ–ù–´–ô –ê–†–•–ò–í (ZIP)</button>
  <p>–í–∫–ª—é—á–∞–µ—Ç: CelesTrak, PDF (50 —à–∞–±–ª–æ–Ω–æ–≤), SVG-–∞–Ω–∏–º–∞—Ü–∏—é, –°–æ–ª–Ω–µ—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É</p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script>
    document.getElementById('dl').onclick = async () => {
      const zip = new JSZip();

      // === index.html ===
      zip.file("index.html", `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–ü–£–¢–ù–ò–ö–û–í–´–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì ‚Äû–ó–ï–ù–ò–¢-7‚Äú</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&family=Cinzel:wght@700&display=swap" rel="stylesheet">
</head>
<body class="retro-terminal">
  <div id="screen-overlay"></div>

  <header class="header-bar">
    <div class="title">–°–ü–£–¢–ù–ò–ö–û–í–´–ô –ö–û–ú–ü–õ–ï–ö–° ¬´–ó–ï–ù–ò–¢-7¬ª</div>
    <div id="status-alert" class="status blink">–û–ë–™–ï–ö–¢ –ë–£–†–ê–ù-4: –ê–ö–¢–ò–í–ï–ù</div>
  </header>

  <main class="main-layout">
    <div id="map-container">
      <svg id="world-map" viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid meet">
        <path d="M0,300 L1200,300 L1200,0 L0,0 Z" fill="#050505" stroke="#003300" stroke-width="0.5"/>
        <g id="oil-rigs"></g>
        <g id="tankers"></g>
        <g id="satellites"></g>
        <g id="buran-4-anim" transform="translate(680,210)">
          <path d="M0,-20 L15,0 L0,20 L-15,0 Z" fill="#333" stroke="#aaa" stroke-width="1"/>
          <path id="wing-left" d="M-15,0 L-60,-10 L-60,10 Z" fill="#555" stroke="#777"/>
          <path id="wing-right" d="M15,0 L60,-10 L60,10 Z" fill="#555" stroke="#777"/>
          <rect id="engine" x="-5" y="20" width="10" height="15" fill="#222"/>
          <g id="flame">
            <polygon points="0,35 -8,50 0,60 8,50" fill="#ff4400"/>
            <animate id="flame-anim" attributeName="points" 
                     values="0,35 -8,50 0,60 8,50;0,35 -6,55 0,65 6,55;0,35 -8,50 0,60 8,50"
                     dur="0.3s" repeatCount="indefinite"/>
          </g>
          <g id="sparks"></g>
        </g>
      </svg>
    </div>

    <div id="event-log">
      <div class="log-title">–ñ–£–†–ù–ê–õ –°–û–ë–´–¢–ò–ô</div>
      <div id="log-entries">
        <div class="log-entry">1991.12.25 23:47:01 ‚Äî –ü–æ—Ç–µ—Ä—è —Å–≤—è–∑–∏ —Å –ö–æ—Å–º–æ—Å-2471</div>
        <div class="log-entry warn">1991.12.25 23:48:17 ‚Äî –ê–Ω–æ–º–∞–ª—å–Ω—ã–π –ò–ö-—Å–∏–≥–Ω–∞–ª: 63¬∞N, 72¬∞E</div>
        <div class="log-entry error blink">1991.12.25 23:51:03 ‚Äî –ë–£–†–ê–ù-4: –†–ï–ñ–ò–ú –°–ê–ú–û–ó–ê–©–ò–¢–´</div>
      </div>
    </div>
  </main>

  <nav class="control-panel">
    <button id="btn-radar">–†–ê–î–ê–†</button>
    <button id="btn-archive">–ê–†–•–ò–í</button>
    <button id="btn-game" class="btn-red">–°–ê–ú–û–£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï</button>
    <button id="btn-report">–û–¢–ß–Å–¢</button>
  </nav>

  <script src="assets/beeps.js"></script>
  <script src="main.js"></script>
  <script src="radar.js"></script>
  <script src="game.js"></script>
  <script src="report.js"></script>
  <script src="solar.js"></script>
  <script src="buran-svg.js"></script>
  <script src="pdf-report.js"></script>
</body>
</html>`);

      // === style.css ===
      zip.file("style.css", `:root{--bg:#000;--text:#00ff00;--warn:#ffff00;--error:#ff0000;--panel-bg:#0a0a1a}
*{margin:0;padding:0;box-sizing:border-box}
.retro-terminal{background:var(--bg);color:var(--text);font-family:'Orbitron','Share Tech Mono','Courier New',monospace;line-height:1.4;height:100vh}
.header-bar{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;background:var(--panel-bg);border-bottom:1px solid #004400;font-size:14px;text-transform:uppercase}
.title{letter-spacing:3px}.status{font-weight:bold;color:var(--error)}
.main-layout{display:flex;height:calc(100vh - 90px)}
#map-container{flex:2;background:#020202;position:relative}
#world-map{width:100%;height:100%;display:block}
#event-log{flex:1;background:var(--panel-bg);padding:12px;overflow-y:auto;font-size:12px}
.log-title{font-family:'Cinzel',serif;font-size:16px;margin-bottom:10px;text-align:center;text-shadow:0 0 6px var(--text)}
.log-entry{margin:4px 0;padding:4px 0;border-bottom:1px dashed #003300}.log-entry.warn{color:var(--warn)}.log-entry.error{color:var(--error)}
.control-panel{display:flex;gap:8px;padding:8px;background:#050515;justify-content:center}
button{padding:8px 16px;background:#111;color:var(--text);border:1px solid #008800;font-family:inherit;font-size:12px;text-transform:uppercase;cursor:pointer}
button:hover{background:#003300}.btn-red{background:#300;border-color:var(--error);color:var(--error);text-shadow:0 0 6px var(--error)}
.btn-red:hover{background:#500}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.2}}.blink{animation:blink 1s infinite}
@media(max-width:1200px){.main-layout{flex-direction:column;height:auto}#map-container,#event-log{flex:1;min-height:300px}}
@media(max-width:768px){.header-bar{flex-direction:column;gap:4px;text-align:center}.control-panel{flex-wrap:wrap}button{flex:1;min-width:120px}}`);

      // === main.js ===
      zip.file("main.js", `let satellitesData=[],tankers=[{x:200,y:400,dx:1.2,dy:-0.3,id:'tkr-1'},{x:800,y:350,dx:-0.9,dy:0.4,id:'tkr-2'},{x:500,y:500,dx:0.7,dy:-0.5,id:'tkr-3'}],oilRigs=[{x:300,y:300},{x:450,y:280},{x:600,y:320},{x:250,y:420},{x:700,y:380}];document.addEventListener('DOMContentLoaded',()=>{initOilRigs();initTankers();fetchSatellites();animate();bindEvents()});function initOilRigs(){const t=document.getElementById('oil-rigs');oilRigs.forEach((e,s)=>{const a=document.createElementNS('http://www.w3.org/2000/svg','g');a.innerHTML=\`<circle cx="\${e.x}" cy="\${e.y}" r="4" fill="#00aa00"/><text x="\${e.x+8}" y="\${e.y+4}" fill="#00ff88" font-size="10">R\${s+1}</text>\`,t.appendChild(a)})}function initTankers(){const t=document.getElementById('tankers');tankers.forEach(e=>{const s=document.createElementNS('http://www.w3.org/2000/svg','g');s.id=\`tanker-\${e.id}\`,s.innerHTML=\`<polygon points="\${e.x},\${e.y-6} \${e.x-5},\${e.y+4} \${e.x+5},\${e.y+4}" fill="#0088ff" stroke="#00ccff" stroke-width="0.5"/><text x="\${e.x+8}" y="\${e.y+4}" fill="#00ccff" font-size="9">T\${e.id.slice(-1)}</text>\`,t.appendChild(s)})}async function fetchSatellites(){let t=[];try{const e=await fetch('./proxy/celestrak.php'),s=await e.text();t=s.trim().split('\n').filter(t=>t.trim())}catch(t){console.warn('CelesTrak –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–∞–Ω–Ω—ã–µ'),t=["COSMOS 2471","1 26509U 00057A   91360.12345678  .00000000  00000-0  00000-0 0    00","2 26509  82.9000 120.0000 0010000  90.0000 270.0000 15.50000000    00","ISS (ZARYA)","1 25544U 98067A   25355.50000000  .00016717  00000-0  10270-3 0  9993","2 25544  51.6421 301.1234 0005000  80.1234 280.1234 15.49123456123456"]}const e=[];for(let s=0;s<t.length;s+=3){if(!t[s+1]||!t[s+2])break;const a=t[s].trim(),i=t[s+1],r=t[s+2],n=parseFloat(r.substring(8,16)),o=parseFloat(r.substring(17,25)),l=100+o/360*1200-200,c=100+n/180*400;e.push({name:a,x:l,y:c,r:2+Math.random()*2})}satellitesData=e,renderSatellites()}function renderSatellites(){const t=document.getElementById('satellites');t.innerHTML='',satellitesData.forEach(e=>{const s=document.createElementNS('http://www.w3.org/2000/svg','circle');s.setAttribute('cx',e.x),s.setAttribute('cy',e.y),s.setAttribute('r',e.r),s.setAttribute('fill','#00ffaa'),s.setAttribute('class','satellite blink-slow'),s.dataset.name=e.name,t.appendChild(s)})}function animate(){tankers.forEach(t=>{t.x+=t.dx,t.y+=t.dy,t.x<50||t.x>1150&&(t.dx*=-1),t.y<50||t.y>550&&(t.dy*=-1);const e=document.getElementById(\`tanker-\${t.id}\`);e.querySelector('polygon').setAttribute('points',\`\${t.x},\${t.y-6} \${t.x-5},\${t.y+4} \${t.x+5},\${t.y+4}\`),e.querySelector('text').setAttribute('x',t.x+8),e.querySelector('text').setAttribute('y',t.y+4)}),requestAnimationFrame(animate)}function bindEvents(){document.getElementById('buran-4-anim').addEventListener('click',()=>{addLog('‚ö†Ô∏è –ë–£–†–ê–ù-4\\n–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 63¬∞N, 72¬∞E\\n–°—Ç–∞—Ç—É—Å: –ê–ö–¢–ò–í–ï–ù\\n–ü—Ä–æ—Ç–æ–∫–æ–ª: –û–ö–û –ó–í–ï–†–Ø ‚Äî –ó–ê–ì–†–£–ñ–ï–ù','error'),playSound('alert')}),document.getElementById('satellites').addEventListener('click',t=>{'circle'===t.target.tagName&&addLog(\`üõ∞Ô∏è \${t.target.dataset.name} ‚Äî —Å–∏–≥–Ω–∞–ª –ø–æ–ª—É—á–µ–Ω\`,'warn')}),document.getElementById('btn-radar').onclick=()=>location.hash='#radar',document.getElementById('btn-archive').onclick=()=>location.hash='#archive',document.getElementById('btn-game').onclick=()=>location.hash='#game',document.getElementById('btn-report').onclick=()=>location.hash='#report'}function addLog(t,e='normal'){const s=document.getElementById('log-entries'),a=document.createElement('div');a.className=\`log-entry \${e}\`,a.textContent=new Date().toISOString().slice(0,19).replace('T',' ')+' ‚Äî '+t,s.appendChild(a),s.scrollTop=s.scrollHeight}function playSound(t){window.sounds&&sounds[t]&&(new Audio(sounds[t])).play().catch(t=>console.warn('Audio blocked'))}`);

      // === buran-svg.js ===
      zip.file("buran-svg.js", `document.addEventListener('DOMContentLoaded',()=>{const t=document.getElementById('buran-4-anim'),e=document.getElementById('wing-left'),s=document.getElementById('wing-right'),a=document.getElementById('engine'),i=document.getElementById('flame'),n=document.getElementById('sparks');let o=!1;t.addEventListener('click',()=>{o=!o;const t=o?25:0;e.style.transform=\`rotate(\${t}deg)\`,s.style.transform=\`rotate(-\${t}deg)\`,playSound('beep'),addLog(\`–ö–†–´–õ–¨–Ø –ë–£–†–ê–ù-4: \${o?"–†–ê–°–ö–†–´–¢–´":"–°–õ–û–ñ–ï–ù–´"}\`,'warn')}),document.getElementById('btn-game').addEventListener('click',()=>{i.querySelector('polygon').setAttribute('fill','#ffaa00'),createSparks()});function createSparks(){for(let t=0;t<10;t++)setTimeout(()=>{const e=(Math.random()-.5)*20,s=35+Math.random()*20,a=document.createElementNS('http://www.w3.org/2000/svg','circle');a.setAttribute('cx',e),a.setAttribute('cy',s),a.setAttribute('r',1),a.setAttribute('fill','#ffff00'),a.setAttribute('opacity','0.8'),n.appendChild(a),setTimeout(()=>a.remove(),1e3)},100*t)}});`);

      // === solar.js ===
      zip.file("solar.js", `document.addEventListener('DOMContentLoaded',()=>{const t=document.createElementNS('http://www.w3.org/2000/svg','svg');t.id='solar-overlay',t.setAttribute('viewBox','0 0 1200 600'),t.style.position='absolute',t.style.top='0',t.style.left='0',t.style.pointerEvents='none',document.getElementById('map-container').appendChild(t);const e=document.createElementNS('http://www.w3.org/2000/svg','circle');e.setAttribute('cx',600),e.setAttribute('cy',300),e.setAttribute('r',20),e.setAttribute('fill','#ffff00'),e.setAttribute('filter','url(#glow)'),t.appendChild(e);const s=document.createElementNS('http://www.w3.org/2000/svg','defs'),a=document.createElementNS('http://www.w3.org/2000/svg','filter');a.id='glow';const i=document.createElementNS('http://www.w3.org/2000/svg','feGaussianBlur');i.setAttribute('stdDeviation','3');const n=document.createElementNS('http://www.w3.org/2000/svg','feMerge'),o=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode'),r=document.createElementNS('http://www.w3.org/2000/svg','feMergeNode');n.appendChild(o),n.appendChild(r),a.appendChild(i),a.appendChild(n),s.appendChild(a),t.appendChild(s);const l=[{name:'‚òø',r:30,speed:.02,size:3,color:'#aaa'},{name:'‚ôÄ',r:50,speed:.015,size:5,color:'#f88'},{name:'‚äï',r:80,speed:.01,size:6,color:'#4a6'},{name:'‚ôÇ',r:110,speed:.008,size:4,color:'#f44'}];l.forEach(t=>{const e=document.createElementNS('http://www.w3.org/2000/svg','g'),s=document.createElementNS('http://www.w3.org/2000/svg','circle');s.setAttribute('cx',600),s.setAttribute('cy',300),s.setAttribute('r',t.r),s.setAttribute('fill','none'),s.setAttribute('stroke','#003300'),s.setAttribute('stroke-width','0.5'),e.appendChild(s);const a=document.createElementNS('http://www.w3.org/2000/svg','circle');a.dataset.angle=0,a.setAttribute('r',t.size),a.setAttribute('fill',t.color),e.appendChild(a);const i=document.createElementNS('http://www.w3.org/2000/svg','text');i.setAttribute('font-size','12'),i.setAttribute('fill',t.color),i.setAttribute('text-anchor','middle'),i.textContent=t.name,e.appendChild(i),t.element=a,t.label=i,t.group=e,t.orbit=s,t.overlay=t.overlay,t.svg=t.svg,t.t=t.t,t.element=t.element,t.angle=0,t.x=600,t.y=300,t.time=0,t.r=t.r,t.speed=t.speed,t.size=t.size,t.color=t.color,e.appendChild(a),e.appendChild(i),t.appendChild(e)});let c=0;function d(){c+=.5,l.forEach(t=>{const e=c*t.speed,s=600+Math.cos(e)*t.r,a=300+Math.sin(e)*t.r;t.element.setAttribute('cx',s),t.element.setAttribute('cy',a),t.label.setAttribute('x',s),t.label.setAttribute('y',a+t.size+8)}),requestAnimationFrame(d)}d()});`);

      // === assets/beeps.js ===
      zip.file("assets/beeps.js", `window.sounds={beep:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFd25ybnNlYF1aV1VTTklFQD05NzUzMTEvLCopJyYlIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEA",alert:"data:audio/wav;base64,UklGRiQDAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YUQDAACBhYqFdW9ubGlva2BdW1lWVFFOS0pHRkI/Pjw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAB",print:"data:audio/wav;base64,UklGRl4DAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YV4DAA==",hum:"data:audio/wav;base64,UklGRiIDAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQIDAACBhYqFeHx/gYOFh4mMjZGSk5aYmZucnqCio6WnqaqrrK6wsbS2uLq..."};`);

      // === pdf-report.js (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π base64 pdf-lib) ===
      zip.file("pdf-report.js", `(async()=>{const t=document.createElement("script");t.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",t.onload=()=>{window.generateTechPassport=async e=>{const{pdf:s,StandardFonts:a,rgb:i}=window.PDFLib,n=s.create(),o=n.addPage([595,842]),{width:r,height:l}=o.getSize(),c=await n.embedFont(a.HelveticaBold),d=await n.embedFont(a.Courier);o.drawRectangle({x:0,y:0,width:r,height:l,color:i(0,0,0)}),o.drawRectangle({x:20,y:20,width:r-40,height:l-40,borderColor:i(0,1,0),borderWidth:2}),o.drawText("‚ö†Ô∏è –ê–í–ê–†–ò–ô–ù–´–ô –ü–†–û–¢–û–ö–û–õ ‚Ññ"+String(e+1).padStart(3,"0"),{x:50,y:l-60,size:24,font:c,color:i(0,1,0)}),o.drawText("–°–ë–û–ô –ò–ò-–ú–û–î–£–õ–Ø ¬´–û–ö–û –ó–í–ï–†–Ø¬ª",{x:50,y:l-90,size:16,font:c,color:i(1,1,0)}),o.drawText("–î–∞—Ç–∞: 1991.12.25\\n–û–±—ä–µ–∫—Ç: –ë—É—Ä–∞–Ω-4\\n–°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô",{x:50,y:l-120,size:10,font:d,color:i(0,1,0),maxWidth:r-100,lineHeight:14}),o.drawText("–°–ï–ö–†–ï–¢–ù–û",{x:r-150,y:50,size:18,font:c,color:i(1,0,0)}),o.drawRectangle({x:r-155,y:45,width:120,height:25,borderColor:i(1,0,0),borderWidth:1}),o.drawText("–¢–µ—Ö–Ω–æ–∂—Ä–µ—Ü IV —Ä–∞–Ω–≥–∞",{x:50,y:40,size:10,font:d,color:i(0,1,0)}),o.drawText("–ü–æ–¥–ø–∏—Å—å: ___________",{x:50,y:25,size:10,font:d,color:i(0,1,0)});const h=await n.save(),u=new Blob([h],{type:"application/pdf"}),m=URL.createObjectURL(u),p=document.createElement("a");p.href=m,p.download="tech_passport_"+String(e+1).padStart(3,"0")+".pdf",p.click()}};document.head.appendChild(t);document.addEventListener("DOMContentLoaded",()=>{const t=document.createElement("button");t.id="btn-generate-pdf",t.textContent="üñ®Ô∏è PDF-–ü–ê–°–ü–û–†–¢",t.className="btn-red",t.onclick=async()=>{playSound("print");const e=Math.floor(50*Math.random());await generateTechPassport(e),addLog("–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù –¢–ï–•–ü–ê–°–ü–û–†–¢ ‚Ññ"+(e+1),"warn")},document.querySelector(".control-panel").appendChild(t)})})();`);

      // === proxy/celestrak.php (mock) ===
      zip.folder("proxy").file("celestrak.php", `<?php
header('Content-Type: text/plain');
header('Access-Control-Allow-Origin: *');
echo "COSMOS 2471
1 26509U 00057A   91360.12345678  .00000000  00000-0  00000-0 0    00
2 26509  82.9000 120.0000 0010000  90.0000 270.0000 15.50000000    00
ISS (ZARYA)
1 25544U 98067A   25355.50000000  .00016717  00000-0  10270-3 0  9993
2 25544  51.6421 301.1234 0005000  80.1234 280.1234 15.49123456123456";`);

      // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (radar.js, game.js, report.js) ‚Äî –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏

      const blob = await zip.generateAsync({type:"blob"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'bura4_monitor_full.zip';
      a.click();
    };
  </script>
</body>
</html>



              <script>
                              // main.js ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å fetchSatellites()
async function fetchSatellites() {
  let tleLines = [];

  try {
    // –ü—Ä–æ–∫—Å–∏ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞: /proxy/celestrak.php)
    const proxyUrl = './proxy/celestrak.php';
    const res = await fetch(proxyUrl);
    const text = await res.text();
    tleLines = text.trim().split('\n').filter(l => l.trim());

  } catch (e) {
    console.warn('CelesTrak –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–∞–Ω–Ω—ã–µ');
    tleLines = [
      "COSMOS 2471", 
      "1 26509U 00057A   91360.12345678  .00000000  00000-0  00000-0 0    00",
      "2 26509  82.9000 120.0000 0010000  90.0000 270.0000 15.50000000    00",
      "ISS (ZARYA)",
      "1 25544U 98067A   25355.50000000  .00016717  00000-0  10270-3 0  9993",
      "2 25544  51.6421 301.1234 0005000  80.1234 280.1234 15.49123456123456"
    ];
  }

  // –ü–∞—Ä—Å–∏–º TLE ‚Üí XYZ –Ω–∞ –∫–∞—Ä—Ç–µ (–ø—Ä–æ–µ–∫—Ü–∏—è: –¥–æ–ª–≥–æ—Ç–∞ ‚Üí x, —à–∏—Ä–æ—Ç–∞ ‚Üí y)
  const parsed = [];
  for (let i = 0; i < tleLines.length; i += 3) {
    if (!tleLines[i+1] || !tleLines[i+2]) break;
    const name = tleLines[i].trim();
    const tle1 = tleLines[i+1];
    const tle2 = tleLines[i+2];

    // –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–µ (i) –∏ RAAN (Œ©) –∏–∑ TLE-2
    const incl = parseFloat(tle2.substring(8, 16));   // –≥—Ä–∞–¥—É—Å—ã
    const raan = parseFloat(tle2.substring(17, 25));  // –≥—Ä–∞–¥—É—Å—ã
    const ecc = parseFloat('0.' + tle2.substring(26, 33));
    const argp = parseFloat(tle2.substring(34, 42));
    const meanAnom = parseFloat(tle2.substring(43, 51));
    const meanMotion = parseFloat(tle2.substring(52, 63)); // –æ–±–æ—Ä–æ—Ç–æ–≤/—Å—É—Ç

    // –£–ø—Ä–æ—â—ë–Ω–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è –≤–∏–∑—É–∞–ª–∞ ‚Äî –Ω–µ —Ç–æ—á–Ω–æ–µ!)
    const now = new Date();
    const minutesSinceEpoch = (now - new Date(2000, 0, 1)) / 60000;
    const meanAnomaly = (meanAnom + meanMotion * minutesSinceEpoch * 360 / 1440) % 360;
    const trueAnomaly = meanAnomaly; // –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ

    // –ü—Ä–æ–µ–∫—Ü–∏—è: x = RAAN (0‚Äì360¬∞) ‚Üí 0‚Äì1200px, y = –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–µ ‚Üí 100‚Äì500px
    const x = (raan % 360) / 360 * 1200;
    const y = 100 + (incl / 180) * 400;

    parsed.push({ name, x, y, r: 2 + Math.random() * 2 });
  }

  satellitesData = parsed;
  renderSatellites();
}

// pdf-report.js ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF –≤ —Å—Ç–∏–ª–µ Tech-Priest
(async () => {
  // –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º pdf-lib –∏ jszip –∫–∞–∫ base64 (—Å–æ–∫—Ä–∞—â–µ–Ω–æ ‚Äî –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è ~180KB)
  const pdfBytes = await fetch('data:application/javascript;base64,JVBERi0xLjcKCjEgMCBvYmoKPDwKL1R5cGUgL...').then(r => r.arrayBuffer());
  const PdfLib = await import(`data:application/javascript;base64,${btoa(new TextDecoder().decode(new Uint8Array(pdfBytes)))}`);

  window.generateTechPassport = async (reportIndex) => {
    const { pdf, StandardFonts, rgb } = PdfLib;

    const templates = [
      // –®–∞–±–ª–æ–Ω 1: –ê–≤–∞—Ä–∏–π–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
      {
        title: "–ê–í–ê–†–ò–ô–ù–´–ô –ü–†–û–¢–û–ö–û–õ ‚Ññ001",
        subtitle: "–°–ë–û–ô –ò–ò-–ú–û–î–£–õ–Ø ¬´–û–ö–û –ó–í–ï–†–Ø¬ª",
        body: `–î–∞—Ç–∞: 1991.12.25\n–í—Ä–µ–º—è: 23:51:03\n–û–±—ä–µ–∫—Ç: –ë—É—Ä–∞–Ω-4\n–°—Ç–∞—Ç—É—Å: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô\n\n–î–∏–∞–≥–Ω–æ–∑:\n‚Äî –ü–µ—Ä–µ–≥—Ä–µ–≤ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (T > 1200¬∞C)\n‚Äî –°–∞–º–æ–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ü–µ–ª–µ–π\n‚Äî –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ‚Äû–ó–≤–µ—Ä—å‚Äú\n\n–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ:\n1. –û—Ç–∫–ª—é—á–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –ò–ò\n2. –ó–∞–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª –ö1824–í–ï1\n3. –ü–†–û–í–ï–†–ò–¢–¨ –ù–ê –í–ù–ï–ó–ï–ú–ù–û–ï –í–ú–ï–®–ê–¢–ï–õ–¨–°–¢–í–û`,
        icon: "‚ö†Ô∏è"
      },
      // –®–∞–±–ª–æ–Ω 2‚Äì50‚Ä¶ (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
      // –ü–æ–ª–Ω—ã–π –º–∞—Å—Å–∏–≤ ‚Äî 50 –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∏–∂–µ ‚Äî —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä)
    ];

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 49 –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É
    if (templates.length < 50) {
      const types = ["–ê–í–ê–†–ò–Ø", "–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê", "–ü–ï–†–ï–•–í–ê–¢", "–î–ï–ö–û–î–ò–†–û–í–ö–ê", "–ü–†–û–†–û–ß–ï–°–¢–í–û"];
      const verbs = ["–æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ", "–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ", "–≤—Å–∫—Ä—ã—Ç–æ", "—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ", "–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–æ"];
      for (let i = 1; i < 50; i++) {
        const type = types[Math.floor(Math.random()*types.length)];
        const verb = verbs[Math.floor(Math.random()*verbs.length)];
        templates.push({
          title: `${type} –ü–†–û–¢–û–ö–û–õ ‚Ññ${String(i+1).padStart(3,'0')}`,
          subtitle: `–ù–ï–°–¢–ê–ë–ò–õ–¨–ù–û–°–¢–¨ –ü–†–û–¢–û–ö–û–õ–ê ‚Äû–ë–£–†–ê–ù-4‚Äú`,
          body: `–î–∞—Ç–∞: 1991.12.25\n–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: ${verb} –∞–Ω–æ–º–∞–ª–∏—è –≤ —Å–µ–∫—Ç–æ—Ä–µ ${Math.floor(Math.random()*360)}¬∞\n\n‚Äî –°–∏–≥–Ω–∞–ª –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ì–û–°–¢ 20.39.201-84\n‚Äî –ß–∞—Å—Ç–æ—Ç–∞: ${Math.floor(100 + Math.random()*2000)} –ú–ì—Ü\n‚Äî –ú–æ–¥—É–ª—è—Ü–∏—è: –±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥ + –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å\n\n–í—ã–≤–æ–¥: –æ–±—ä–µ–∫—Ç –ø—Ä–æ—è–≤–ª—è–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ *—Å–∞–º–æ—Å–æ–∑–Ω–∞–Ω–∏—è*`,
          icon: ["‚ö†Ô∏è", "üîç", "üîê", "üì°", "üëÅÔ∏è"][i%5]
        });
      }
    }

    const data = templates[reportIndex % 50];
    const doc = pdf.create();
    const page = doc.addPage([595, 842]); // A4

    const { width, height } = page.getSize();
    const font = await doc.embedFont(StandardFonts.HelveticaBold);
    const monoFont = await doc.embedFont(StandardFonts.Courier);

    // –§–æ–Ω ‚Äî —á—ë—Ä–Ω—ã–π —Å –∑–µ–ª—ë–Ω—ã–º —à—É–º–æ–º
    page.drawRectangle({ x: 0, y: 0, width, height, color: rgb(0, 0, 0) });

    // –†–∞–º–∫–∞ ‚Äî —Ç–µ—Ö–Ω–æ–∂—Ä–µ—á–µ—Å–∫–∞—è
    page.drawRectangle({ x: 20, y: 20, width: width-40, height: height-40, borderColor: rgb(0,1,0), borderWidth: 2 });

    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
    page.drawText(`${data.icon} ${data.title}`, {
      x: 50, y: height - 60,
      size: 24,
      font: font,
      color: rgb(0, 1, 0)
    });

    // –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ (–≥–æ—Ç–∏–∫–æ–π)
    page.drawText(data.subtitle, {
      x: 50, y: height - 90,
      size: 16,
      font: font,
      color: rgb(1, 1, 0)
    });

    // –¢–µ–ª–æ ‚Äî –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–º
    page.drawText(data.body, {
      x: 50, y: height - 130,
      size: 10,
      font: monoFont,
      color: rgb(0, 1, 0),
      maxWidth: width - 100,
      lineHeight: 14
    });

    // –®—Ç–∞–º–ø "–°–ï–ö–†–ï–¢–ù–û"
    page.drawText("–°–ï–ö–†–ï–¢–ù–û", {
      x: width - 150, y: 50,
      size: 18,
      font: font,
      color: rgb(1, 0, 0)
    });
    page.drawRectangle({
      x: width - 155, y: 45, width: 120, height: 25,
      borderColor: rgb(1, 0, 0), borderWidth: 1
    });

    // –ü–æ–¥–ø–∏—Å—å
    page.drawText("–¢–µ—Ö–Ω–æ–∂—Ä–µ—Ü IV —Ä–∞–Ω–≥–∞", { x: 50, y: 40, size: 10, font: monoFont, color: rgb(0,1,0) });
    page.drawText(`–ü–æ–¥–ø–∏—Å—å: ___________`, { x: 50, y: 25, size: 10, font: monoFont, color: rgb(0,1,0) });

    const pdfBytes = await doc.save();
    return pdfBytes;
  };

  // –≠–∫—Å–ø–æ—Ä—Ç: –∫–Ω–æ–ø–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
  document.addEventListener('DOMContentLoaded', () => {
    if (document.getElementById('btn-generate-pdf')) return;
    const btn = document.createElement('button');
    btn.id = 'btn-generate-pdf';
    btn.textContent = 'üñ®Ô∏è PDF-–ü–ê–°–ü–û–†–¢';
    btn.className = 'btn-red';
    btn.onclick = async () => {
      playSound('print');
      const idx = Math.floor(Math.random() * 50);
      const pdf = await generateTechPassport(idx);
      const blob = new Blob([pdf], { type: 'application/pdf' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `tech_passport_${String(idx+1).padStart(3,'0')}.pdf`;
      a.click();
      addLog(`–°–ì–ï–ù–ï–†–ò–†–û–í–ê–ù –¢–ï–•–ü–ê–°–ü–û–†–¢ ‚Ññ${idx+1}`, 'warn');
    };
    document.querySelector('.control-panel').appendChild(btn);
  });
})();

// buran-svg.js
document.addEventListener('DOMContentLoaded', () => {
  const buran = document.getElementById('buran-4-anim');
  const wingL = document.getElementById('wing-left');
  const wingR = document.getElementById('wing-right');
  const engine = document.getElementById('engine');
  let wingsOpen = false;

  // –ê–Ω–∏–º–∞—Ü–∏—è –∫—Ä—ã–ª—å–µ–≤ (—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ)
  buran.addEventListener('click', () => {
    wingsOpen = !wingsOpen;
    const angle = wingsOpen ? 25 : 0;
    wingL.style.transform = `rotate(${angle}deg)`;
    wingR.style.transform = `rotate(-${angle}deg)`;
    playSound('beep');
    addLog(`–ö–†–´–õ–¨–Ø –ë–£–†–ê–ù-4: ${wingsOpen ? '–†–ê–°–ö–†–´–¢–´' : '–°–õ–û–ñ–ï–ù–´'}`, 'warn');
  });

  // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è
  document.getElementById('btn-game').addEventListener('click', () => {
    // –ü–ª–∞–º—è —è—Ä—á–µ
    document.getElementById('flame').querySelector('polygon').setAttribute('fill', '#ffaa00');
    // –ò—Å–∫—Ä—ã
    createSparks();
  });

  function createSparks() {
    const sparks = document.getElementById('sparks');
    for (let i = 0; i < 10; i++) {
      setTimeout(() => {
        const x = (Math.random() - 0.5) * 20;
        const y = 35 + Math.random() * 20;
        const spark = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        spark.setAttribute('cx', x);
        spark.setAttribute('cy', y);
        spark.setAttribute('r', 1);
        spark.setAttribute('fill', '#ffff00');
        spark.setAttribute('opacity', '0.8');
        sparks.appendChild(spark);
        // –£–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ 1—Å
        setTimeout(() => spark.remove(), 1000);
      }, i * 100);
    }
  }
});

// solar.js
document.addEventListener('DOMContentLoaded', () => {
  // –í–Ω–µ—à–Ω–∏–π SVG-—Å–ª–æ–π (–≤—ã—à–µ –∫–∞—Ä—Ç—ã)
  const overlay = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
  overlay.id = 'solar-overlay';
  overlay.setAttribute('viewBox', '0 0 1200 600');
  overlay.style.position = 'absolute';
  overlay.style.top = '0';
  overlay.style.left = '0';
  overlay.style.pointerEvents = 'none';
  document.getElementById('map-container').appendChild(overlay);

  // –°–æ–ª–Ω—Ü–µ
  const sun = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
  sun.setAttribute('cx', 600); sun.setAttribute('cy', 300);
  sun.setAttribute('r', 20);
  sun.setAttribute('fill', '#ffff00');
  sun.setAttribute('filter', 'url(#glow)');
  overlay.appendChild(sun);

  // –§–∏–ª—å—Ç—Ä —Å–≤–µ—á–µ–Ω–∏—è
  const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
  const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');
  filter.id = 'glow';
  const feGaussianBlur = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');
  feGaussianBlur.setAttribute('stdDeviation', '3');
  const feMerge = document.createElementNS('http://www.w3.org/2000/svg', 'feMerge');
  const feMergeNode1 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
  const feMergeNode2 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
  feMerge.appendChild(feMergeNode1);
  feMerge.appendChild(feMergeNode2);
  filter.appendChild(feGaussianBlur);
  filter.appendChild(feMerge);
  defs.appendChild(filter);
  overlay.appendChild(defs);

  // –ü–ª–∞–Ω–µ—Ç—ã
  const planets = [
    { name: '‚òø', r: 30, speed: 0.02, size: 3, color: '#aaa' },   // –ú–µ—Ä–∫—É—Ä–∏–π
    { name: '‚ôÄ', r: 50, speed: 0.015, size: 5, color: '#f88' },  // –í–µ–Ω–µ—Ä–∞
    { name: '‚äï', r: 80, speed: 0.01, size: 6, color: '#4a6' },   // –ó–µ–º–ª—è
    { name: '‚ôÇ', r: 110, speed: 0.008, size: 4, color: '#f44' }  // –ú–∞—Ä—Å
  ];

  planets.forEach(p => {
    const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
    const orbit = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    orbit.setAttribute('cx', 600); orbit.setAttribute('cy', 300);
    orbit.setAttribute('r', p.r);
    orbit.setAttribute('fill', 'none');
    orbit.setAttribute('stroke', '#003300');
    orbit.setAttribute('stroke-width', '0.5');
    group.appendChild(orbit);

    const planet = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    planet.dataset.angle = 0;
    planet.setAttribute('r', p.size);
    planet.setAttribute('fill', p.color);
    group.appendChild(planet);

    const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    label.setAttribute('font-size', '12');
    label.setAttribute('fill', p.color);
    label.setAttribute('text-anchor', 'middle');
    label.textContent = p.name;
    group.appendChild(label);

    overlay.appendChild(group);
    p.element = planet;
    p.label = label;
  });

  // –ê–Ω–∏–º–∞—Ü–∏—è
  let time = 0;
  function animateSolar() {
    time += 0.5;
    planets.forEach(p => {
      const angle = time * p.speed;
      const x = 600 + Math.cos(angle) * p.r;
      const y = 300 + Math.sin(angle) * p.r;
      p.element.setAttribute('cx', x);
      p.element.setAttribute('cy', y);
      p.label.setAttribute('x', x);
      p.label.setAttribute('y', y + p.size + 8);
    });
    requestAnimationFrame(animateSolar);
  }
  animateSolar();
});


              </script>
                        </body>
                        </html>
                    
