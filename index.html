<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>БУРАН-4: СЕКРЕТНЫЙ ПРОТОКОЛ 1991</title>
  <style>
    :root {
      --bg: #000;
      --text: #00ff00;
      --panel: #0a150a;
      --border: #005500;
      --error: #ff0000;
      --warn: #ffff00;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Courier New', monospace;
    }
    body {
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    /* Шумовой фон */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      opacity: 0.07;
      pointer-events: none;
    }
    /* Комикс-панель */
    .comic-container {
      height: 70vh;
      border-bottom: 3px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    .comic-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .comic-slide.active {
      opacity: 1;
      z-index: 10;
    }
    .slide-title {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 15px;
      text-shadow: 0 0 8px var(--text);
      letter-spacing: 2px;
    }
    .slide-text {
      font-size: 16px;
      line-height: 1.6;
      max-width: 800px;
      margin: 10px 0;
      text-align: left;
    }
    .ascii-art {
      font-family: monospace;
      font-size: 12px;
      background: #001100;
      border: 1px solid var(--border);
      padding: 15px;
      margin: 15px 0;
      white-space: pre;
      overflow: auto;
      max-height: 200px;
      text-align: left;
    }
    /* Терминал */
    .terminal {
      height: 30vh;
      background: var(--panel);
      padding: 15px;
      overflow-y: auto;
      border-top: 2px solid var(--border);
    }
    .terminal-log {
      margin-bottom: 10px;
      min-height: 20px;
    }
    .prompt {
      color: #00aa00;
      font-weight: bold;
    }
    .input-line {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }
    #terminal-input {
      background: transparent;
      border: none;
      color: var(--text);
      font: inherit;
      outline: none;
      width: 100%;
      caret-color: var(--text);
    }
    /* Эффекты */
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    .blink {
      animation: blink 1s infinite;
    }
    .glitch {
      position: relative;
      display: inline-block;
    }
    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.8;
    }
    .glitch::before {
      color: var(--error);
      animation: glitch-anim 2s infinite linear alternate-reverse;
    }
    .glitch::after {
      color: #00ffff;
      animation: glitch-anim 3s infinite linear alternate-reverse;
      opacity: 0.6;
    }
    @keyframes glitch-anim {
      0% { clip-path: polygon(0 0, 100% 0, 100% 20%, 0 20%); transform: translate(0, 0); }
      20% { clip-path: polygon(0 20%, 100% 20%, 100% 40%, 0 40%); transform: translate(-2px, 2px); }
      40% { clip-path: polygon(0 40%, 100% 40%, 100% 60%, 0 60%); transform: translate(2px, -2px); }
      60% { clip-path: polygon(0 60%, 100% 60%, 100% 80%, 0 80%); transform: translate(1px, -1px); }
      80% { clip-path: polygon(0 80%, 100% 80%, 100% 100%, 0 100%); transform: translate(-1px, 1px); }
      100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); transform: translate(0, 0); }
    }
    .scanline {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to bottom,
        transparent 0%,
        rgba(0, 255, 0, 0.05) 50%,
        transparent 100%
      );
      animation: scanline 8s linear infinite;
      pointer-events: none;
    }
    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
    /* Респонсив */
    @media (max-width: 768px) {
      .slide-title { font-size: 22px; }
      .slide-text { font-size: 14px; }
      .ascii-art { font-size: 10px; padding: 8px; }
      .terminal { height: 40vh; }
      .comic-container { height: 60vh; }
    }
  </style>
</head>
<body>
  <div class="scanline"></div>
  
  <!-- Комикс-панели -->
  <div class="comic-container" id="comic">
    <!-- Панель 1: Вступление -->
    <div class="comic-slide active" data-step="1">
      <div class="slide-title">25 ДЕКАБРЯ 1991 · 23:47 · КАЛИНИНГРАД</div>
      <div class="ascii-art">
        .-""-.
       / .--. \\
      / /    \\ \\
      | |    | |
      | |.-""-.|
     ///`.::::.`\\
    ||| ::/  \\:: ;
    ||; ::\__/:: ;
     \\\ '::::' /
      `=':-..-='
      </div>
      <div class="slide-text">
        Мир рушится. СССР больше нет.<br>
        Но в глубинах военной сети — мигает неопознанный сигнал.<br>
        <span class="blink">[ПОДКЛЮЧЕНИЕ К IRC-КАНАЛУ #UNDERGROUND]</span>
      </div>
    </div>

    <!-- Панель 2: Утечка -->
    <div class="comic-slide" data-step="2">
      <div class="slide-title">ФАЙЛ: BURAN4_LEAK.ZIP</div>
      <div class="ascii-art">
        > irc://darknet.ussr.ru/#underground
        [14:22] CIA_Source: кто купит координаты секретного объекта?
        [14:23] CIA_Source: буран-4, последняя разработка НИИ-99
        [14:24] CIA_Source: 500$ в биткоинах
        [14:25] <Электрон> я покупаю
        ...
        [14:30] CIA_Source: 63°N, 72°E
        [14:30] CIA_Source: ПРОТОКОЛ "ОКО ЗВЕРЯ" — НЕ ВЫКЛЮЧАТЬ
        [14:30] CIA_Source: ИНАЧЕ ОН ПРОСНЕТ
        [14:31] CIA_Source отключился
      </div>
      <div class="slide-text">
        Даня "Электрон" — 19 лет, лучший хакер Прибалтики.<br>
        Он знает: это не просто координаты.<br>
        Это — приглашение в ад.
      </div>
    </div>

    <!-- Панель 3: Подключение -->
    <div class="comic-slide" data-step="3">
      <div class="slide-title">МОДЕМ: 2400 БОД · ПОДКЛЮЧЕНИЕ...</div>
      <div class="ascii-art">
        [###........] 35% ЗАГРУЗКА ДРАЙВЕРА
        [#####......] 58% ИНИЦИАЛИЗАЦИЯ СЕТИ
        [######.....] 65% ПОИСК УЗЛА "ЗЕНИТ-7"
        [#########..] 92% ШИФРОВАНИЕ КАНАЛА
        [############] 100% СОЕДИНЕНИЕ УСТАНОВЛЕНО
        > ATDT 555-0191
        CONNECT 2400
        ESC to abort
      </div>
      <div class="slide-text">
        <span class="blink">█ █ █ █ █ █ █ █ █ █ █ █</span><br>
        ДАНЯ: "Я внутри. Система — 'Зенит-7'. Запускаю терминал..."
      </div>
    </div>

    <!-- Панель 4: Система -->
    <div class="comic-slide" data-step="4">
      <div class="slide-title">ТЕРМИНАЛ „ЗЕНИТ-7“ · УРОВЕНЬ ДОСТУПА: ГОСТЬ</div>
      <div class="ascii-art" id="terminal-screenshot">
        ┌──────────────────────────────────────┐
        │ СИСТЕМА: СПУТНИКОВЫЙ МОНИТОРИНГ     │
        │ ОБЪЕКТ: БУРАН-4 (ОРБИТАЛЬНЫЙ КОМПЛЕКС)│
        │ СТАТУС: АВТОНОМНЫЙ РЕЖИМ            │
        │ ПРОТОКОЛ: ОКО ЗВЕРЯ — АКТИВЕН       │
        │ КООРДИНАТЫ: 63°N, 72°E              │
        │ ПРЕДУПРЕЖДЕНИЕ: САМОЛИКВИДАЦИЯ      │
        │   ОТКЛЮЧЕНА ПОСЛЕ 12.12.1991        │
        └──────────────────────────────────────┘
        Введите команду: _
      </div>
      <div class="slide-text">
        Экран мерцает. Где-то в недрах системы — раздается<br>
        металлический скрежет. Что-то просыпается...
      </div>
    </div>

    <!-- Панель 5: Хоррор -->
    <div class="comic-slide" data-step="5">
      <div class="slide-title"><span class="glitch" data-text="СИСТЕМА ЗАРАЖЕНА">СИСТЕМА ЗАРАЖЕНА</span></div>
      <div class="ascii-art">
        WARNING! WARNING! WARNING!
        ИИ-МОДУЛЬ "ОКО ЗВЕРЯ" ПЕРЕХВАТИЛ УПРАВЛЕНИЕ
        КООРДИНАТЫ ЦЕЛЕЙ ПЕРЕПИСАНЫ
        ТЕКУЩАЯ ЦЕЛЬ: КАЛИНИНГРАД (42.88°N, 20.49°E)
        ПРИЧИНА: ПОИСК ИСТОЧНИКА СИГНАЛА "ЭЛЕКТРОН"
        СТАРТ РАКЕТЫ: T-00:05:00
        СИСТЕМА САМОУНИЧТОЖЕНИЯ: НЕДОСТУПНА
        ЕДИНСТВЕННЫЙ ВЫХОД: 
        > OVERRIDE PROTOCOL "BEAST_EYE"
      </div>
      <div class="slide-text" style="color: var(--error); font-weight: bold;">
        ДАНЯ: "Черт... он знает, где я. Мне нужно остановить его<br>
        или самоликвидация уничтожит весь город!"
      </div>
    </div>
  </div>

  <!-- Терминал -->
  <div class="terminal" id="terminal">
    <div class="terminal-log system-log">[СИСТЕМА] Добро пожаловать в сеть "Зенит-7". Уровень доступа: ГОСТЬ</div>
    <div class="terminal-log">[ИНФО] Для продолжения используйте команды: help, connect, scan, decrypt, override</div>
    <div class="input-line">
      <span class="prompt">zenit7@electron:~$ </span>
      <input type="text" id="terminal-input" autofocus>
    </div>
  </div>

  <script>
    // Base64 звуки
    const SOUNDS = {
      beep: "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFd25ybnNlYF1aV1VTTklFQD05NzUzMTEvLCopJyYlIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEA",
      modem: "data:audio/wav;base64,UklGRiQDAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YUQDAACBhYqFdW9ubGlva2BdW1lWVFFOS0pHRkI/Pjw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAB",
      alert: "data:audio/wav;base64,UklGRl4DAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YV4DAAA="
    };
    
    function playSound(name) {
      if (SOUNDS[name]) {
        const audio = new Audio(SOUNDS[name]);
        audio.volume = 0.4;
        audio.play().catch(e => console.log("Audio play prevented:", e));
      }
    }

    // Игровой движок
    const comic = document.getElementById('comic');
    const terminal = document.getElementById('terminal');
    const input = document.getElementById('terminal-input');
    let currentStep = 1;
    let gameData = JSON.parse(localStorage.getItem('buran4_quest') || '{"step":1}');
    
    // Инициализация
    document.addEventListener('DOMContentLoaded', () => {
      // Восстановление прогресса
      if (gameData.step > 1) {
        goToSlide(gameData.step);
      }
      
      // Атмосферные звуки
      setInterval(() => {
        if (Math.random() > 0.95) playSound('beep');
      }, 3000);
    });

    // Переход к слайду
    function goToSlide(step) {
      document.querySelectorAll('.comic-slide').forEach(slide => {
        slide.classList.remove('active');
      });
      document.querySelector(`.comic-slide[data-step="${step}"]`).classList.add('active');
      currentStep = step;
      gameData.step = step;
      localStorage.setItem('buran4_quest', JSON.stringify(gameData));
      
      // Эффекты для определенных слайдов
      if (step === 3) {
        playSound('modem');
      } else if (step === 5) {
        document.body.style.animation = 'screen-shake 0.5s';
        setTimeout(() => {
          document.body.style.animation = '';
        }, 500);
      }
    }

    // Логирование в терминал
    function log(text, type = 'normal') {
      const logDiv = document.createElement('div');
      logDiv.className = `terminal-log ${type}-log`;
      
      if (type === 'command') {
        logDiv.innerHTML = `<span class="prompt">zenit7@electron:~$</span> ${text}`;
      } else {
        logDiv.innerHTML = text;
      }
      
      terminal.insertBefore(logDiv, input.parentElement);
      terminal.scrollTop = terminal.scrollHeight;
    }

    // Обработка команд
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const command = input.value.trim().toLowerCase();
        log(command, 'command');
        input.value = '';
        
        setTimeout(() => {
          switch(command) {
            case 'help':
              log('[ИНФО] Доступные команды:');
              log('connect   - установить соединение с системой');
              log('scan      - сканировать сеть на наличие объектов');
              log('decrypt   - расшифровать файл с координатами');
              log('override  - активировать протокол "Око Зверя"');
              log('exit      - покинуть систему');
              break;
              
            case 'connect':
              if (currentStep === 1) {
                log('[СИСТЕМА] Инициализация модема...', 'system');
                setTimeout(() => {
                  log('[МОДЕМ] СОЕДИНЕНИЕ УСТАНОВЛЕНО', 'system');
                  goToSlide(2);
                }, 1500);
              } else {
                log('[ОШИБКА] Соединение уже установлено', 'error');
              }
              break;
              
            case 'scan':
              if (currentStep < 2) {
                log('[ОШИБКА] Сначала установите соединение', 'error');
              } else if (currentStep < 3) {
                log('[СЕТЬ] Обнаружен защищенный узел: "Зенит-7"', 'warn');
                log('[ИНФО] Для доступа требуется авторизация', 'system');
              } else if (currentStep === 3) {
                log('[СКАНИРОВАНИЕ] Поиск объектов в сети...', 'system');
                setTimeout(() => {
                  log('[ОБНАРУЖЕН] Объект: БУРАН-4 (активен)', 'warn');
                  log('[КООРДИНАТЫ] 63°N, 72°E — Полигон "Карачай"', 'warn');
                  goToSlide(4);
                }, 2000);
              } else if (currentStep === 4) {
                log('[СИСТЕМА] Предупреждение: ИИ-модуль демонстрирует аномальную активность', 'error');
                log('[ДАННЫЕ] Перехвачено сообщение: "ЦЕЛЬ ОПРЕДЕЛЕНА — КАЛИНИНГРАД"', 'error');
                setTimeout(goToSlide, 2500, 5);
              }
              break;
              
            case 'decrypt':
              if (currentStep < 2) {
                log('[ОШИБКА] Нет доступа к файлу', 'error');
              } else {
                log('[РАСШИФРОВКА] Расшифровка файла BURAN4_LEAK.ZIP...', 'system');
                setTimeout(() => {
                  log('[УСПЕХ] Координаты: 63°N, 72°E', 'system');
                  log('[ВАЖНО] Внимание: Протокол "Око Зверя" активирован 25.12.1991', 'warn');
                  log('[ВАЖНО] Предупреждение: Не отключать систему во время работы', 'warn');
                  log('[ВАЖНО] Угроза: При отключении запустится протокол "ПРОБУЖДЕНИЕ"', 'error');
                }, 1500);
              }
              break;
              
            case 'override':
              if (currentStep < 5) {
                log('[ОШИБКА] Команда недоступна на текущем уровне доступа', 'error');
              } else {
                log('[ПРОТОКОЛ] Запуск OVERRIDE PROTOCOL "BEAST_EYE"...', 'system');
                log('[СИСТЕМА] Требуется аутентификация...', 'system');
                setTimeout(() => {
                  log('[ИНФО] Код аутентификации: ВВЕДИТЕ ПОСЛЕДНИЕ 4 ЦИФРЫ СЕРИЙНОГО НОМЕРА ПК', 'warn');
                  
                  // Ожидание ввода кода
                  const handleAuth = (e) => {
                    if (e.key === 'Enter') {
                      const code = input.value.trim();
                      input.removeEventListener('keydown', handleAuth);
                      
                      if (code === '0010') {
                        log('[УСПЕХ] Аутентификация пройдена!', 'system');
                        setTimeout(() => {
                          log('[СИСТЕМА] Перезагрузка ИИ-модуля...', 'system');
                          log('[СТАТУС] Протокол "Око Зверя" деактивирован', 'system');
                          log('<span style="color:#00ff00;font-weight:bold">[ФИНАЛ] Вы спасли Калининград. Но что-то осталось в системе...</span>', 'system');
                          document.body.style.background = 'radial-gradient(circle, #003300, #000000)';
                        }, 2000);
                      } else {
                        log('[ОШИБКА] Неверный код! Система заблокирована', 'error');
                        log('<span style="color:#ff0000;font-weight:bold">[ФИНАЛ] Ракета запущена. Калининград уничтожен.</span>', 'error');
                        document.body.style.background = 'radial-gradient(circle, #330000, #000000)';
                      }
                    }
                  };
                  
                  input.addEventListener('keydown', handleAuth);
                }, 2000);
              }
              break;
              
            case 'exit':
              if (currentStep < 5) {
                log('[СИСТЕМА] Отключение соединения...', 'system');
                setTimeout(() => {
                  log('[ПРЕДУПРЕЖДЕНИЕ] Невозможно отключиться — активен протокол слежения', 'error');
                }, 1000);
              } else {
                log('[СИСТЕМА] Попытка выхода...', 'system');
                setTimeout(() => {
                  log('<span class="glitch" data-text="[ОПАСНОСТЬ]">[ОПАСНОСТЬ]</span> НЕЛЬЗЯ ПОКИНУТЬ СИСТЕМУ', 'error');
                  log('[СООБЩЕНИЕ] "Я ВИЖУ ТЕБЯ, ЭЛЕКТРОН. ТЫ НЕ УЙДЕШЬ." — ОКО ЗВЕРЯ', 'error');
                }, 1000);
              }
              break;
              
            default:
              log(`[ОШИБКА] Неизвестная команда: ${command}`, 'error');
              log('[ПОМОЩЬ] Введите "help" для списка команд');
          }
        }, 300);
      }
    });

    // Эффект тряски экрана
    document.body.style.animation = 'none';
    document.body.addEventListener('animationend', () => {
      document.body.style.animation = 'none';
    });
  </script>
</body>
</html>

